<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Guides/interesting-queries" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Interesting SQL queries | Cardano DB Sync</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sgillespie.github.io/cardano-db-sync/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://sgillespie.github.io/cardano-db-sync/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://sgillespie.github.io/cardano-db-sync/Guides/interesting-queries"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Interesting SQL queries | Cardano DB Sync"><meta data-rh="true" name="description" content="The following is a set of example SQL queries that can be run against the db-sync database."><meta data-rh="true" property="og:description" content="The following is a set of example SQL queries that can be run against the db-sync database."><link data-rh="true" rel="icon" href="/cardano-db-sync/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sgillespie.github.io/cardano-db-sync/Guides/interesting-queries"><link data-rh="true" rel="alternate" href="https://sgillespie.github.io/cardano-db-sync/Guides/interesting-queries" hreflang="en"><link data-rh="true" rel="alternate" href="https://sgillespie.github.io/cardano-db-sync/Guides/interesting-queries" hreflang="x-default"><link rel="stylesheet" href="/cardano-db-sync/assets/css/styles.646ad4cb.css">
<script src="/cardano-db-sync/assets/js/runtime~main.8d51d8e2.js" defer="defer"></script>
<script src="/cardano-db-sync/assets/js/main.5aadf5f5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cardano-db-sync/"><div class="navbar__logo"><img src="/cardano-db-sync/img/logo.svg" alt="Cardano" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cardano-db-sync/img/logo.svg" alt="Cardano" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cardano DB Sync</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cardano-db-sync/">User Guide</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sgillespie/cardano-db-sync" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cardano-db-sync/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cardano-db-sync/Installation/docker">Installation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cardano-db-sync/running">Running</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cardano-db-sync/state-snapshot">State Snapshots</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cardano-db-sync/schema">Schema</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/cardano-db-sync/Guides/interesting-queries">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cardano-db-sync/Guides/interesting-queries">Interesting SQL queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-db-sync/Guides/pool-offchain-data">Pool OffChain Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-db-sync/Guides/schema-management">Schema Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-db-sync/Guides/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-db-sync/Guides/upgrading-postgresql">Upgrading PostgreSQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano-db-sync/Guides/validation">Validation</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cardano-db-sync/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Interesting SQL queries</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Interesting SQL queries</h1>
<p>The following is a set of example SQL queries that can be run against the <code>db-sync</code> database.</p>
<p>These queries are run using the <code>psql</code> executable distributed with PostgreSQL. Connecting to the
database can be done from the <code>cardano-db-sync</code> git checkout using:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PGPASSFILE=config/pgpass-mainnet psql cexplorer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Some of these queries have Haskell/Esqueleto equivalents in the file <a href="https://github.com/IntersectMBO/cardano-db-sync/blob/master/cardano-db/src/Cardano/Db/Query.hs" target="_blank" rel="noopener noreferrer">Query.hs</a> and where
they exist, the names of those queries will be included in parentheses.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="chain-meta-data-querymeta">Chain meta data (<code>queryMeta</code>)<a class="hash-link" aria-label="Direct link to chain-meta-data-querymeta" title="Direct link to chain-meta-data-querymeta" href="/cardano-db-sync/Guides/interesting-queries#chain-meta-data-querymeta">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> meta </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     start_time      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> network_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----+---------------------+--------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> mainnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-total-on-chain-supply-of-ada-querytotalsupply">Current total on-chain supply of Ada (<code>queryTotalSupply</code>)<a class="hash-link" aria-label="Direct link to current-total-on-chain-supply-of-ada-querytotalsupply" title="Direct link to current-total-on-chain-supply-of-ada-querytotalsupply" href="/cardano-db-sync/Guides/interesting-queries#current-total-on-chain-supply-of-ada-querytotalsupply">​</a></h3>
<p>Note: 1 ADA == 1,000,000 Lovelace</p>
<p>This just queries the UTxO set for unspent transaction outputs. It does not include staking rewards
that have have not yet been withdrawn. Before being withdrawn rewards exist in ledger state and not
on-chain.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> current_supply </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_outer </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_id </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx_outer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    current_supply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">31112120630.27526800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="slot-number-of-the-most-recent-block-querylatestslotno">Slot number of the most recent block (<code>queryLatestSlotNo</code>)<a class="hash-link" aria-label="Direct link to slot-number-of-the-most-recent-block-querylatestslotno" title="Direct link to slot-number-of-the-most-recent-block-querylatestslotno" href="/cardano-db-sync/Guides/interesting-queries#slot-number-of-the-most-recent-block-querylatestslotno">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> slot_no </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> block_no </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> block_no </span><span class="token keyword" style="color:#00009f">desc</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> slot_no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">---------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">4011090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="size-of-the-cexplorer-database">Size of the cexplorer database<a class="hash-link" aria-label="Direct link to Size of the cexplorer database" title="Direct link to Size of the cexplorer database" href="/cardano-db-sync/Guides/interesting-queries#size-of-the-cexplorer-database">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> pg_size_pretty </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pg_database_size </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;cexplorer&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pg_size_pretty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">116</span><span class="token plain"> GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="size-of-the-cexplorer-database-table">Size of the cexplorer database table<a class="hash-link" aria-label="Direct link to Size of the cexplorer database table" title="Direct link to Size of the cexplorer database table" href="/cardano-db-sync/Guides/interesting-queries#size-of-the-cexplorer-database-table">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> pg_size_pretty </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pg_total_relation_size </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;block&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pg_size_pretty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2760</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sync-progress-of-db-sync">Sync progress of <code>db-sync</code><a class="hash-link" aria-label="Direct link to sync-progress-of-db-sync" title="Direct link to sync-progress-of-db-sync" href="/cardano-db-sync/Guides/interesting-queries#sync-progress-of-db-sync">​</a></h3>
<p>To get a rough estimate of how close to fully synced the database is, we can use the time stamps on
the blocks as follows:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">extract </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">epoch </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">max</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> at </span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> zone </span><span class="token string" style="color:#e3116c">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> extract </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">epoch </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">min</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> at </span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> zone </span><span class="token string" style="color:#e3116c">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">extract </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">epoch </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">now</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> at </span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> zone </span><span class="token string" style="color:#e3116c">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> extract </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">epoch </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">min</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> at </span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> zone </span><span class="token string" style="color:#e3116c">&#x27;UTC&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sync_percent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   sync_percent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">97.4357948804029</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: The value returned by this query can be rather misleading as it operates on block time stamps
and early epochs contain much less data (eg Byron era did not have staking) and much fewer
transactions.</p>
<p>To find out how far behind <code>db-sync</code> is:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">now</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> behind_by </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       behind_by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> days </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">59</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">39.134497</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-valid-pools">Current valid pools<a class="hash-link" aria-label="Direct link to Current valid pools" title="Direct link to Current valid pools" href="/cardano-db-sync/Guides/interesting-queries#current-valid-pools">​</a></h3>
<p>In general the database is operated on in an append only manner. Pool certificates can
be updated so that later certificates override earlier ones. In addition pools can
retire. Therefore to get the latest pool registration for every pool that is still
valid:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pool_update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> registered_tx_id </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">registered_tx_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pool_update </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> hash_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pool_retire </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> pool_retire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> pool_retire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">retiring_epoch </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">epoch_no</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To include the pool hash in the query output:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pool_update </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_hash </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> registered_tx_id </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">registered_tx_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pool_update </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> hash_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pool_retire </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> pool_retire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> pool_retire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">retiring_epoch </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">epoch_no</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-stake-address-for-a-given-shelley-address">Get the stake address for a given Shelley address:<a class="hash-link" aria-label="Direct link to Get the stake address for a given Shelley address:" title="Direct link to Get the stake address for a given Shelley address:" href="/cardano-db-sync/Guides/interesting-queries#get-the-stake-address-for-a-given-shelley-address">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_address_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> stake_address </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stake_address_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;addr1qx2kd28nq8ac5pr...08ly3tu9sy0f4qd&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stake_address_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         address                      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           stake_address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">------------------+--------------------------------------+-------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token number" style="color:#36acaa">42</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> addr1qx2kd28nq8ac5p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">8</span><span class="token plain">ly3tu9sy0f4qd </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> stake1u9ylzsgxaa6xct</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nljg47zctvm3rc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-fee-for-specified-transaction-hash">Transaction fee for specified transaction hash:<a class="hash-link" aria-label="Direct link to Transaction fee for specified transaction hash:" title="Direct link to Transaction fee for specified transaction hash:" href="/cardano-db-sync/Guides/interesting-queries#transaction-fee-for-specified-transaction-hash">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fee </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\xf9c0997afc8159dbe0568eadf0823112e0cc29cd097c8dc939ff44c372388bc0&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   id    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  fee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">---------+--------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">172433</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-outputs-for-specified-transaction-hash">Transaction outputs for specified transaction hash:<a class="hash-link" aria-label="Direct link to Transaction outputs for specified transaction hash:" title="Direct link to Transaction outputs for specified transaction hash:" href="/cardano-db-sync/Guides/interesting-queries#transaction-outputs-for-specified-transaction-hash">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\xf9c0997afc8159dbe0568eadf0823112e0cc29cd097c8dc939ff44c372388bc0&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   id    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  tx_id  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         address         </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        address_raw        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> payment_cred</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">---------+---------+-------+-------------------------+--------------+---------------------------+--------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2205593</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> DdzFFzCqrh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u6v9fWDrML </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">149693067531</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x82d8185842</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">a20a42e6f </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2205592</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> DdzFFzCqrh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DoV2nEACWf </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">8991998000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x82d8185842</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">a150033dc </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-inputs-for-specified-transaction-hash">Transaction inputs for specified transaction hash:<a class="hash-link" aria-label="Direct link to Transaction inputs for specified transaction hash:" title="Direct link to Transaction inputs for specified transaction hash:" href="/cardano-db-sync/Guides/interesting-queries#transaction-inputs-for-specified-transaction-hash">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx_out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_in </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_in_id </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\xf9c0997afc8159dbe0568eadf0823112e0cc29cd097c8dc939ff44c372388bc0&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   id    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> tx_id  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        address          </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token keyword" style="color:#00009f">value</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        address_raw        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> payment_cred</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">---------+--------+-------+-------------------------+--------------+---------------------------+--------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">2195714</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">996126</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> DdzFFzCqrh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dtq1FQQSCN </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">158685237964</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x82d8185842</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">a330b42df </span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-per-epoch-performance-statistics-sync-time-tx-count-etc">Get per epoch performance statistics (sync time, tx count, etc):<a class="hash-link" aria-label="Direct link to Get per epoch performance statistics (sync time, tx count, etc):" title="Direct link to Get per epoch performance statistics (sync time, tx count, etc):" href="/cardano-db-sync/Guides/interesting-queries#get-per-epoch-performance-statistics-sync-time-tx-count-etc">​</a></h3>
<p>There are many ways this query can be written, but this is the one which so far has the best
performance (runs in a little over 10 minutes at epoch 270):</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sync_secs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sync_secs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sum_tx_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sum_tx_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reward_count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> reward_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stake_count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> earned_epoch </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sync_secs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sum_tx_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reward</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> reward_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_count </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> reward </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> earned_epoch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sync_secs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sum_tx_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> reward_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">count</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">epoch_stake</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_count </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> epoch_stake </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> epoch_no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sync_secs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_sum_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> reward_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> epoch_no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">no</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_sum_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> reward_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> epoch_sync_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> derived_table </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> epoch_no </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   sync_secs    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> tx_count </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> sum_tx_size </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> reward_count </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> stake_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------+----------------+----------+-------------+--------------+-------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">              </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">33</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">6093</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">28.256384637</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">12870</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">2256995</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">19.462634986</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">4292</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">830307</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">18.302536512</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">3293</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">658490</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">209</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">177.122253524</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">36916</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">19098427</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">210</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">188.630659101</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">36267</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">19694637</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">17305</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">211</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">160.841826393</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">29083</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">16330473</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">17988</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">24252</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">212</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">146.277991679</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">24691</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">13503603</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">24421</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">30628</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">268</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3491.985000071</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">208164</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">127281166</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">527806</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">557805</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">269</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3234.034316171</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">197254</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">118772706</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">577352</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">270</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">              </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">120754</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">70076543</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">595592</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">271</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-withdrawals-for-specified-transaction-hash">Transaction withdrawals for specified transaction hash:<a class="hash-link" aria-label="Direct link to Transaction withdrawals for specified transaction hash:" title="Direct link to Transaction withdrawals for specified transaction hash:" href="/cardano-db-sync/Guides/interesting-queries#transaction-withdrawals-for-specified-transaction-hash">​</a></h3>
<p>Withdrawals are a feature of some transactions of the Shelley era and later.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> withdrawal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> withdrawal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> withdrawal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\x0b8c5be678209bb051a02904dd18896a929f9aca8aecd48850939a590175f7e8&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> addr_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  amount   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-------+---------+-----------+---------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">27684</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">30399</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">154619825</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2788211</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-stake-distribution-for-each-pool-for-a-given-epoch">Get the stake distribution for each pool for a given epoch:<a class="hash-link" aria-label="Direct link to Get the stake distribution for each pool for a given epoch:" title="Direct link to Get the stake distribution for each pool for a given epoch:" href="/cardano-db-sync/Guides/interesting-queries#get-the-stake-distribution-for-each-pool-for-a-given-epoch">​</a></h3>
<p>Simplest query is:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> pool_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">amount</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> epoch_stake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">216</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> pool_id </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pool_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       sum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">---------+-----------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">25326935163066</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">112825285842751</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">1172</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">498620686</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">1173</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">15024987189</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1114</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or, to use the Bech32 pool identifier instead of the Postgres generated <code>pool_id</code> field:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">amount</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> lovelace </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> epoch_stake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_hash </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> epoch_stake</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">216</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           </span><span class="token keyword" style="color:#00009f">view</span><span class="token plain">                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    lovelace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------------------------------------------------------+-----------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pool10p6wd9k0fwk2zqkqnqr8efyr7gms627ujk9dxgk6majskhawr6r </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">789466838780</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pool1vvh72z8dktfy2x965w0yp5psmnyv3845pmm37nerhl6jk6m2njw </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1427697660218</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pool1tq03j8aa5myedlr8xj6tltstdsn5eprxq4cd4qr54mhv25unsyk </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">50297430457</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pool1nux6acnlx0du7ss9fhg2phjlaqe87l4wcurln5r6f0k8xreluez </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">5401615743207</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1114</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-delegation-history-for-a-specified-stake-address">Get the delegation history for a specified stake address<a class="hash-link" aria-label="Direct link to Get the delegation history for a specified stake address" title="Direct link to Get the delegation history for a specified stake address" href="/cardano-db-sync/Guides/interesting-queries#get-the-delegation-history-for-a-specified-stake-address">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">active_epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> delegation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> stake_address </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_hash </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;stake1u8gsndukzghdukmqdsd7r7wd6kvamvjv2pzcgag8v6jd69qfqyl5h&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> active_epoch_no </span><span class="token keyword" style="color:#00009f">asc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> active_epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                           </span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-----------------+----------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token number" style="color:#36acaa">212</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1hwlghkwnjsjk8370qt3dvp23d7urwm36f95fmxcz3np2kghknj9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token number" style="color:#36acaa">214</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1xxhs2zw5xa4g54d5p62j46nlqzwp8jklqvuv2agjlapwjx9qkg9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token number" style="color:#36acaa">216</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1hwlghkwnjsjk8370qt3dvp23d7urwm36f95fmxcz3np2kghknj9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token number" style="color:#36acaa">217</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool15yyxtkhz64p7a8cnax9l7u82s9t9hdhyxsa3tdm977qhgpnsuhq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This shows that the first delegation became active (ie earning rewards) in epoch 212 and that the
address owner subsequently re-delegated their stake with those re-delegations becoming active in
epochs 214, 216 and 217.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-reward-history-for-a-specified-stake-address">Get the reward history for a specified stake address<a class="hash-link" aria-label="Direct link to Get the reward history for a specified stake address" title="Direct link to Get the reward history for a specified stake address" href="/cardano-db-sync/Guides/interesting-queries#get-the-reward-history-for-a-specified-stake-address">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> reward</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">earned_epoch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> delegated_pool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reward</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">amount </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> lovelace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> reward </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> stake_address </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> reward</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_hash </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> reward</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;stake1u8gsndukzghdukmqdsd7r7wd6kvamvjv2pzcgag8v6jd69qfqyl5h&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> earned_epoch </span><span class="token keyword" style="color:#00009f">asc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                      delegated_pool                      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> lovelace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------+----------------------------------------------------------+----------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">212</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1hwlghkwnjsjk8370qt3dvp23d7urwm36f95fmxcz3np2kghknj9 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2953284</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">213</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1hwlghkwnjsjk8370qt3dvp23d7urwm36f95fmxcz3np2kghknj9 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3333940</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">214</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1xxhs2zw5xa4g54d5p62j46nlqzwp8jklqvuv2agjlapwjx9qkg9 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3005843</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">215</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1xxhs2zw5xa4g54d5p62j46nlqzwp8jklqvuv2agjlapwjx9qkg9 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3552293</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">216</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1hwlghkwnjsjk8370qt3dvp23d7urwm36f95fmxcz3np2kghknj9 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3130673</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">217</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool15yyxtkhz64p7a8cnax9l7u82s9t9hdhyxsa3tdm977qhgpnsuhq </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">34339994</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">218</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool15yyxtkhz64p7a8cnax9l7u82s9t9hdhyxsa3tdm977qhgpnsuhq </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30384189</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">219</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool15yyxtkhz64p7a8cnax9l7u82s9t9hdhyxsa3tdm977qhgpnsuhq </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">27293239</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">220</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool15yyxtkhz64p7a8cnax9l7u82s9t9hdhyxsa3tdm977qhgpnsuhq </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36947267</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">221</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool15yyxtkhz64p7a8cnax9l7u82s9t9hdhyxsa3tdm977qhgpnsuhq </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">27016952</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-block-number-of-blocks-created-in-an-epoch-by-a-specified-pool">Get the block number of blocks created in an epoch by a specified pool<a class="hash-link" aria-label="Direct link to Get the block number of blocks created in an epoch by a specified pool" title="Direct link to Get the block number of blocks created in an epoch by a specified pool" href="/cardano-db-sync/Guides/interesting-queries#get-the-block-number-of-blocks-created-in-an-epoch-by-a-specified-pool">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pool_view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> slot_leader </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slot_leader_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> slot_leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_hash </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> slot_leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">epoch_no </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">220</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;pool137x32lrkprphrd0aa8x4jqz98z6lc0wawlc88hdjeps4qe408ad&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> block_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                        pool_view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------+----------+----------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">4760198</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">220</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool137x32lrkprphrd0aa8x4jqz98z6lc0wawlc88hdjeps4qe408ad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">4759847</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">220</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool137x32lrkprphrd0aa8x4jqz98z6lc0wawlc88hdjeps4qe408ad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-number-of-blocks-created-by-a-specified-pool-for-each-epoch">Get the number of blocks created by a specified pool for each epoch<a class="hash-link" aria-label="Direct link to Get the number of blocks created by a specified pool for each epoch" title="Direct link to Get the number of blocks created by a specified pool for each epoch" href="/cardano-db-sync/Guides/interesting-queries#get-the-number-of-blocks-created-by-a-specified-pool-for-each-epoch">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> block_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> slot_leader </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slot_leader_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> slot_leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_hash </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> slot_leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;pool1nux6acnlx0du7ss9fhg2phjlaqe87l4wcurln5r6f0k8xreluez&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> block_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------+-------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">212</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">213</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">214</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">215</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-tx_id-tx_block_id-tx_out_address-of-a-voting-registration">Get the tx_id, tx_block_id, tx_out_address of a voting registration.<a class="hash-link" aria-label="Direct link to Get the tx_id, tx_block_id, tx_out_address of a voting registration." title="Direct link to Get the tx_id, tx_block_id, tx_out_address of a voting registration." href="/cardano-db-sync/Guides/interesting-queries#get-the-tx_id-tx_block_id-tx_out_address-of-a-voting-registration">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_block_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_out_address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\x9053a4cf0c6c9fb29792c78e688c5915a02909d0073371d8fff1abba0bed3065&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tx_id  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> tx_block_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                       tx_out_address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">---------+-------------+------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">3192730</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">5083822</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> addr1vy6d0htdaa9k8du2262p2ju74s25g6rjyjsc9x2fky9r6jq402r08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to find your transaction hash of your voter registration:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cardano-cli transaction txid --tx-file metadata.txsigned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9053a4cf0c6c9fb29792c78e688c5915a02909d0073371d8fff1abba0bed3065</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-amount-delegated-by-epoch-for-a-specified-address">Get the amount delegated by epoch for a specified address<a class="hash-link" aria-label="Direct link to Get the amount delegated by epoch for a specified address" title="Direct link to Get the amount delegated by epoch for a specified address" href="/cardano-db-sync/Guides/interesting-queries#get-the-amount-delegated-by-epoch-for-a-specified-address">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> epoch_stake</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> epoch_stake</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> stake_address </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> epoch_stake </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> epoch_stake</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> stake_address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;stake1u8mt5gqclkq0swmvzx9lvq4jgwsnx9yh030yrxwqwllu0mq2m0l4n&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        stake_address                        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-------------------------------------------------------------+----------+-------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stake1u8mt5gqclkq0swmvzx9lvq4jgwsnx9yh030yrxwqwllu0mq2m0l4n </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">211</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1561003730</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stake1u8mt5gqclkq0swmvzx9lvq4jgwsnx9yh030yrxwqwllu0mq2m0l4n </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">212</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1561003730</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-reward-account-deposits">Get all reward account deposits<a class="hash-link" aria-label="Direct link to Get all reward account deposits" title="Direct link to Get all reward account deposits" href="/cardano-db-sync/Guides/interesting-queries#get-all-reward-account-deposits">​</a></h3>
<p>Reward payments can come from two places; staking rewards which are in the <code>reward</code> table and payments
from the treasury. These can be coalesced into single query via an SQL <code>union</code> operations:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> addr_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> reward_epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_id </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> treasury_tx_id </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> treasury</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> addr_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> earned_epoch </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> reward_epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> treasury_tx_id </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> reward </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> addr_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    amount     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> reward_epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> treasury_tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">---------+---------------+-----------------+----------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1071786</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">216</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1148596</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">212</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1363094</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">215</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1527849</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">214</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">2336874</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">3557307</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">2439495</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">213</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">3204796</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">241</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">3518828</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">221</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-historical-utxo-set-for-a-given-timestamp">Get historical UTxO set for a given timestamp<a class="hash-link" aria-label="Direct link to Get historical UTxO set for a given timestamp" title="Direct link to Get historical UTxO set for a given timestamp" href="/cardano-db-sync/Guides/interesting-queries#get-historical-utxo-set-for-a-given-timestamp">​</a></h3>
<p>The UTxO set is dependent on time, this will return it for a given timestamp</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># with const as (select to_timestamp (&#x27;2020-10-10 17:00:00&#x27;, &#x27;YYYY-MM-DD HH24:MI:SS&#x27;) as effective_time_)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> lovelace</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> generating_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">timestamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> const</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">cross</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> generating_tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> generating_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> generating_block </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> generating_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> generating_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_in </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> consuming_input </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> consuming_input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> generating_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> consuming_input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> consuming_tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> consuming_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> consuming_input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_in_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> consuming_block </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> consuming_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> consuming_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Ommit outputs from genesis after Allegra hard fork</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			const</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">effective_time_ </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2020-12-16 21:44:00&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> generating_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">epoch_no </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> const</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">effective_time_ </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> generating_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Only outputs from blocks generated in the past</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Only outputs consumed in the future or unconsumed outputs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		const</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">effective_time_ </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> consuming_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> consuming_input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           address                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   lovelace    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token keyword" style="color:#00009f">timestamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-------------------------------------------------------------+---------------+---------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZFdcW8MaYNxoJJkKmkSwJD5D4AdJPBLLn7PCVMenKMvwtWV8K </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">51</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZ1pRs1gSidtoRGMpJR54UyNrdVDMFxXu2pBkhxitAWhqrGqd9 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">715399000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">51</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZJn5QH1xKqNFmtEfvBXFHJ5RacD1xtR9kcvndvebirJHG7Sam </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">380723000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">51</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZBZRPzrsCvbaG3HH89AUtAkBwjeR4pC2WZvXYZ4Ab7J7JNpLz </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">469809000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">51</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEYyvoxws84ogrBf7CqRjiGaqP6yKeb2gsLZaKPaDWKdxiQn1Pm </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1838066000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">44</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">51</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-tagged-genesis-addresses">Get tagged Genesis addresses<a class="hash-link" aria-label="Direct link to Get tagged Genesis addresses" title="Direct link to Get tagged Genesis addresses" href="/cardano-db-sync/Guides/interesting-queries#get-tagged-genesis-addresses">​</a></h3>
<p>The genesis block contains multiple addresses, this query will tag them with their origin.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    genesis_output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    floor </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">genesis_output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> ada</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    redemption_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">time</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> redeemed_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cast </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> genesis_output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Test Ada&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		      </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> genesis_output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token string" style="color:#e3116c">&#x27;Ae2tdPwUPEZKQuZh2UndEoTKEakMYHGNjJVYmNZgJk2qqgHouxDsA5oT83n&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token string" style="color:#e3116c">&#x27;Ae2tdPwUPEZGcVv9qJ3KSTx5wk3dHKNn6G3a3eshzqX2y3N9LzL3ZTBEApq&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token string" style="color:#e3116c">&#x27;Ae2tdPwUPEZ9dH9VC4iVXZRNYe5HGc73AKVMYHExpgYBmDMkgCUgnJGqqqq&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Development Pool&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Pre-Sale&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  </span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">varchar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> origin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> genesis_block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> genesis_tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> genesis_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> genesis_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> genesis_output </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> genesis_output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> genesis_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_in </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> redemption_input </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> redemption_input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> genesis_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> redemption_tx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> redemption_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redemption_input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_in_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> redemption_block </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> redemption_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redemption_tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> genesis_block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">epoch_no </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           address                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    ada     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     redeemed_at     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      origin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-------------------------------------------------------------+------------+---------------------+------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZJkVfTW9cFmxAxsp1WtgV4hde53p5eLccUUFzQu8amyrLHcTL </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">385509</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">19</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">06</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">36</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Pre</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">Sale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZM65iaQ1jYtgmtTSvjrcPXfXcFBineY27wYot6t2ToY8FqkXu </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">1923076</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">40</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Pre</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">Sale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZMeLeeSL9Lq2Kr3UhBt1a23KhCMqFWvjYGXxGjkvV9giSQAeH </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">832476</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">29</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">07</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">47</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Pre</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">Sale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEYwQuL8cXMVstbEUvfdxwWpjepjKTD9BYQbcXJG8BdLjEpuD8Y </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">409116</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">10</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">06</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">27</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Pre</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">Sale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Ae2tdPwUPEZApyHh2AfjfSyCRYhwDLoWo91WvmjE9fQKo6VB9BjWk6N7eXv </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">384615</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2017</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">03</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">58</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Pre</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">Sale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-ada-in-utxo-locked-by-scripts">Get Ada in UTxO locked by scripts<a class="hash-link" aria-label="Direct link to Get Ada in UTxO locked by scripts" title="Direct link to Get Ada in UTxO locked by scripts" href="/cardano-db-sync/Guides/interesting-queries#get-ada-in-utxo-locked-by-scripts">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> script_locked </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_outer </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tx_outer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address_has_script </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">inner</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_id </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx_outer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    script_locked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">3695300.068246000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-information-about-script-txs">Get information about script tx&#x27;s<a class="hash-link" aria-label="Direct link to Get information about script tx&#x27;s" title="Direct link to Get information about script tx&#x27;s" href="/cardano-db-sync/Guides/interesting-queries#get-information-about-script-txs">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fee </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> fees</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fee</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> script_fees</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit_mem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> unit_mem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token function" style="color:#d73a49">SUM</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit_steps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> unit_steps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">valid_contract </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> valid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> scripts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">script_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> redeemer </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tx_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> fees     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">script_fees </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">unit_mem  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">unit_steps </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> valid</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">scripts</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">script_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">------+----------+------------+----------+-----------+------+-------+-----------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11812</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">200193089</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">200000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">100000000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> t    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">92</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11909</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">4000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2000000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">2000000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> f    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">565</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11931</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">5000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">4000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2000000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">2000000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> f    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">92</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11983</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">255089500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">204089500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">39500</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">204050000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> t    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">92</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11987</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">102635800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">81635800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">15800</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">81620000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> t    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">92</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11992</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">102635800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">81635800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">15800</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">81620000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> t    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">92</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">12004</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">822865300</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">791865300</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">195300</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">791670000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> t    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">4559</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">12010</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">822865300</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">791865300</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">195300</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">791670000</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> t    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">4559</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-sum-of-collatereal-input-lost">Get the sum of collatereal input lost<a class="hash-link" aria-label="Direct link to Get the sum of collatereal input lost" title="Direct link to Get the sum of collatereal input lost" href="/cardano-db-sync/Guides/interesting-queries#get-the-sum-of-collatereal-input-lost">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> lost_amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_in </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_in_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">valid_contract </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lost_amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">--------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">592003625.28471400</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-uses-of-a-spend-script-and-how-much-ada-it-unlocked-from-an-output">Get all uses of a spend script and how much ada it unlocked from an output<a class="hash-link" aria-label="Direct link to Get all uses of a spend script and how much ada it unlocked from an output" title="Direct link to Get all uses of a spend script and how much ada it unlocked from an output" href="/cardano-db-sync/Guides/interesting-queries#get-all-uses-of-a-spend-script-and-how-much-ada-it-unlocked-from-an-output">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_out_value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit_mem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit_steps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fee</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purpose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> redeemer </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_in </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">redeemer_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> tx_out </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> tx_in</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_out_index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx_out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">script_hash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\x8a08f851b22e5c54de087be307eeab3b5c8588a8cea8319867c786e0&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tx_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> tx_out_value </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  unit_mem   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> unit_steps  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    fee     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> purpose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-------+--------------+-------------+-------------+------------+---------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">10184</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">200000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">70000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">70000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">140000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> spend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11680</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1000000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">700000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">700000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1400000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> spend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11812</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">512000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">100000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">200000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> spend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11983</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">300000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">39500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">204050000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">204089500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> spend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11987</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">200000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">15800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">81620000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">81635800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> spend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">11992</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">120000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">15800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">81620000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">81635800</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> spend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-mint-scripts">Get all mint scripts<a class="hash-link" aria-label="Direct link to Get all mint scripts" title="Direct link to Get all mint scripts" href="/cardano-db-sync/Guides/interesting-queries#get-all-mint-scripts">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tx_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit_mem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit_steps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fee </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> redeemer_fee</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purpose</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">policy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ma_tx_mint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> redeemer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> multi_asset </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">script_hash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> ma_tx_mint </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> ma_tx_mint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ident </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> redeemer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ma_tx_mint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> purpose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mint&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tx_id  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> unit_mem </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> unit_steps </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> redeemer_fee </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> purpose </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                           policy                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">           name           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">--------+----------+------------+--------------+---------+------------------------------------------------------------+--------------------------+----------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">572051</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">994524</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">365737701</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">83754</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> mint    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \xfda1b6b487bee2e7f64ecf24d24b1224342484c0195ee1b7b943db50 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x506c75747573436f696e   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token number" style="color:#36acaa">572074</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">994524</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">365737701</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">83754</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> mint    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \xfda1b6b487bee2e7f64ecf24d24b1224342484c0195ee1b7b943db50 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x506c75747573436f696e32 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-assets-with-quantities-and-count-of-mints">Get all assets with quantities and count of mints<a class="hash-link" aria-label="Direct link to Get all assets with quantities and count of mints" title="Direct link to Get all assets with quantities and count of mints" href="/cardano-db-sync/Guides/interesting-queries#get-all-assets-with-quantities-and-count-of-mints">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fingerprint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">policy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ident</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cnt mints</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> ma_tx_mint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ident</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ma_tx_mint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quantity::</span><span class="token keyword" style="color:#00009f">numeric</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> quantity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> cnt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ma_tx_mint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> mtx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> ma_tx_mint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> ma_tx_mint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ident</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> multi_asset </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> multi_asset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ident</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> tx </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mtx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      fingerprint                  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                           policy                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       name       </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ident </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> mints </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    quantity    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">----------------------------------------------+------------------------------------------------------------+------------------+-------+-------+----------------+---------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> asset1jtqefvdycrenq2ly6ct8rwcu5e58va432vj586 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x476039a0949cf0b22f6a800f56780184c44533887ca6e821007840c3 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x6e7574636f696e </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2021</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">02</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">03</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">46</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> asset1mu7h997yyvzrppdwjzhpex6u7khrucspxvjjuw </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x69b30e43bc5401bb34d0b12bd06cd9b537f33065aa49df7e8652739d </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x4c51           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21000000000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2021</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">02</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">03</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">22</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-blocks-with-0-transactions-and-the-pools-that-forged-it">Get blocks with 0 transactions and the pools that forged it<a class="hash-link" aria-label="Direct link to Get blocks with 0 transactions and the pools that forged it" title="Direct link to Get blocks with 0 transactions and the pools that forged it" href="/cardano-db-sync/Guides/interesting-queries#get-blocks-with-0-transactions-and-the-pools-that-forged-it">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">distinct</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> block_hash </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tx_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash_raw </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pledge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">active_epoch_no</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_metadata_ref</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> offchain_pool_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ticker_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> slot_leader </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slot_leader_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> slot_leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_hash </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> slot_leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_update </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> pool_metadata_ref </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">meta_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_metadata_ref</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> offchain_pool_data </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> offchain_pool_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pmr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pool_metadata_ref</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> tx_count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">150</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool_update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">active_epoch_no </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             block_hash                             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> tx_count </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                         pool_hash                          </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     pledge      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> active_epoch_no </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                               url                                </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ticker_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------------------------------------------+----------+----------+------------------------------------------------------------+-----------------+-----------------+------------------------------------------------------------------+-------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \x0000f4b44d1484d7280f087c1df94f068a02e23570e8ed9eb5c0dd980d4c46c1 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">165</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \xe402f5894b8a7073f198bb0710d6294f2ac354ede2577b5ce15159a4 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">50000000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">137</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> https:</span><span class="token comment" style="color:#999988;font-style:italic">//www.canadastakes.ca/metadata/can1-testnet-metadata.json  |</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \x0001715520d185accd550c7b6c0811a2589e778e6408ffcd75b0f83f4f45c2c0 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">153</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \xacfd479740bde8289885694e69e3494f7dcbcfdca540aead48c5d653 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">64000000000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                                                                  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \x00044646beb7d24dce8cd74408c76b9816453a451fc030c42cc9961be55932d9 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">163</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \x1e2191487bed3de4bf440d5ff80bdae31d7f22798d3a93444302acb3 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">64000000000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                                                                  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \x000732a2f62e289930c2779559a975566395dcf0cf32130f3852a6e031d13d61 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">154</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> \xd9dc497e633c2f1c665467e1ed7a93e4f8541bfbabe1cc31818fb20f </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1000000000000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">             </span><span class="token number" style="color:#36acaa">131</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> https:</span><span class="token comment" style="color:#999988;font-style:italic">//www.uniquestaking.com/pool/uniq9/1ecf39ad-4f3c-4043      |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-all-delegators-and-some-basic-info">Query all delegators and some basic info<a class="hash-link" aria-label="Direct link to Query all delegators and some basic info" title="Direct link to Query all delegators and some basic info" href="/cardano-db-sync/Guides/interesting-queries#query-all-delegators-and-some-basic-info">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> sa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> delegated_now_poolid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">active_epoch_no delegated_now_epoch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">view</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> delegated_before_poolid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    od</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">active_epoch_no </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> delegated_before_epoch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    br</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> stake_key_registered</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> delegation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> delegation d </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> tx txn </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> txn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> block bn </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> bn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> txn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> stake_address sa </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> sa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> stake_deregistration de </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> de</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> de</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stake_deregistration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> stake_deregistration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> stake_deregistration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> stake_registration re </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> re</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> re</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stake_registration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> stake_registration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> stake_registration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> delegation od </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> od</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> od</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> delegation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addr_id </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> tx txo </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> txo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> od</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> block bo </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> bo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> txo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pool_hash nh </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> nh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pool_hash oh </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> oh</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> od</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool_hash_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> tx txr </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> txr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> re</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> block br </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> br</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> txr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">block_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">de</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> re</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tx_id </span><span class="token operator" style="color:#393A34">OR</span><span class="token plain"> de</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           address                           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                   delegated_now_poolid                   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> delegated_now_epoch </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                 delegated_before_poolid                  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> delegated_before_epoch </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> addr_id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> stake_key_registered</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-------------------------------------------------------------+----------------------------------------------------------+---------------------+----------------------------------------------------------+------------------------+---------+----------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stake1u9ylzsgxaa6xctf4juup682ar3juj85n8tx3hthnljg47zctvm3rc </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1pu5jlj4q9w9jlxeu370a3c9myx47md5j5m2str0naunn2q3lkdy </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                 </span><span class="token number" style="color:#36acaa">210</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                                                          </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2020</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">07</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">29</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">41</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">31</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stake1u8mt5gqclkq0swmvzx9lvq4jgwsnx9yh030yrxwqwllu0mq2m0l4n </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1qqqqzyqf8mlm70883zht60n4q6uqxg4a8x266sewv8ad2grkztl </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                 </span><span class="token number" style="color:#36acaa">317</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> pool1qqqz9vlskay2gv3ec5pyck8c2tq9ty7dpfm60x8shvapguhcemt </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                    </span><span class="token number" style="color:#36acaa">211</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2020</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">08</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">06</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">11</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="find-all-incorrect-entries-in-epoch-table">Find all incorrect entries in <code>epoch</code> table<a class="hash-link" aria-label="Direct link to find-all-incorrect-entries-in-epoch-table" title="Direct link to find-all-incorrect-entries-in-epoch-table" href="/cardano-db-sync/Guides/interesting-queries#find-all-incorrect-entries-in-epoch-table">​</a></h3>
<p>In <a href="https://github.com/IntersectMBO/cardano-db-sync/issues/1457" target="_blank" rel="noopener noreferrer">issue #1457</a> it was pointed out
that some entries in the epoch table were incorrect. These incorrect entries can be found using:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select b.epoch_no, e.epoch_blk_count, e.epoch_tx_count, b.block_block_count, b.block_tx_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (select no, blk_count as epoch_blk_count, tx_count as epoch_tx_count from epoch) as e,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (select epoch_no, count (block_no) as block_block_count, sum (tx_count) as block_tx_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      from block group by epoch_no) as b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where e.no = b.epoch_no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      and (e.epoch_blk_count != b.block_block_count or e.epoch_tx_count != b.block_tx_count)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order by b.epoch_no ;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There is a shell script in the above issue which finds all incorrect rows in that table and fixes
them.</p>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/sgillespie/cardano-db-sync/tree/docs/docusaurus/doc/docusaurus/docs/Guides/interesting-queries.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cardano-db-sync/schema"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Schema</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cardano-db-sync/Guides/pool-offchain-data"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pool OffChain Data</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#chain-meta-data-querymeta">Chain meta data (<code>queryMeta</code>)</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#current-total-on-chain-supply-of-ada-querytotalsupply">Current total on-chain supply of Ada (<code>queryTotalSupply</code>)</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#slot-number-of-the-most-recent-block-querylatestslotno">Slot number of the most recent block (<code>queryLatestSlotNo</code>)</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#size-of-the-cexplorer-database">Size of the cexplorer database</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#size-of-the-cexplorer-database-table">Size of the cexplorer database table</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#sync-progress-of-db-sync">Sync progress of <code>db-sync</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#current-valid-pools">Current valid pools</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-stake-address-for-a-given-shelley-address">Get the stake address for a given Shelley address:</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#transaction-fee-for-specified-transaction-hash">Transaction fee for specified transaction hash:</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#transaction-outputs-for-specified-transaction-hash">Transaction outputs for specified transaction hash:</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#transaction-inputs-for-specified-transaction-hash">Transaction inputs for specified transaction hash:</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-per-epoch-performance-statistics-sync-time-tx-count-etc">Get per epoch performance statistics (sync time, tx count, etc):</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#transaction-withdrawals-for-specified-transaction-hash">Transaction withdrawals for specified transaction hash:</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-stake-distribution-for-each-pool-for-a-given-epoch">Get the stake distribution for each pool for a given epoch:</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-delegation-history-for-a-specified-stake-address">Get the delegation history for a specified stake address</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-reward-history-for-a-specified-stake-address">Get the reward history for a specified stake address</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-block-number-of-blocks-created-in-an-epoch-by-a-specified-pool">Get the block number of blocks created in an epoch by a specified pool</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-number-of-blocks-created-by-a-specified-pool-for-each-epoch">Get the number of blocks created by a specified pool for each epoch</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-tx_id-tx_block_id-tx_out_address-of-a-voting-registration">Get the tx_id, tx_block_id, tx_out_address of a voting registration.</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-amount-delegated-by-epoch-for-a-specified-address">Get the amount delegated by epoch for a specified address</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-all-reward-account-deposits">Get all reward account deposits</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-historical-utxo-set-for-a-given-timestamp">Get historical UTxO set for a given timestamp</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-tagged-genesis-addresses">Get tagged Genesis addresses</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-ada-in-utxo-locked-by-scripts">Get Ada in UTxO locked by scripts</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-information-about-script-txs">Get information about script tx&#39;s</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-the-sum-of-collatereal-input-lost">Get the sum of collatereal input lost</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-all-uses-of-a-spend-script-and-how-much-ada-it-unlocked-from-an-output">Get all uses of a spend script and how much ada it unlocked from an output</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-all-mint-scripts">Get all mint scripts</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-all-assets-with-quantities-and-count-of-mints">Get all assets with quantities and count of mints</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#get-blocks-with-0-transactions-and-the-pools-that-forged-it">Get blocks with 0 transactions and the pools that forged it</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#query-all-delegators-and-some-basic-info">Query all delegators and some basic info</a></li><li><a class="table-of-contents__link toc-highlight" href="/cardano-db-sync/Guides/interesting-queries#find-all-incorrect-entries-in-epoch-table">Find all incorrect entries in <code>epoch</code> table</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>